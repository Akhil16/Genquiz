$(document).ready(function(){var e,t="",i="",n="negative",s="",u="";$("#start-quiz-btn").on("click",function(){var s={};$("#start-quiz-form").serializeArray().map(function(e){s[e.name]=e.value}),$.ajax({type:"POST",url:start_quiz_url,data:s,dataType:"json",success:function(s){u="",t=s.question.question_type,i=s.question.answer,n="negative",u+="</div><div class='well'><div class='row' id='"+s.question.question_unique+"'  style='display : none;'><h3><strong>Q "+s.question.question_number+"</strong> "+s.question.question+"</h3>","text"==t?u+="<div class='form-group'><input class='form-control' type='text' id='text-answer'><input type='hidden' value='"+s.options[0].option_content+"' id='text-answer-content'></div>":(u+="<h5 style='color : green;'>"+t.toUpperCase()+"</h5><ul  class='list-group'>",$.each(s.options,function(e,t){u+="<a href=''><li class='list-option list-group-item list-group-item-info' id='"+t.option_unique+"'>"+t.option_content+"</li></a><br>"}),u+="</ul>"),u+="<button class='btn btn-danger' id='submit-quiz-btn'>Submit</button><br><div class='alert-message'></div><form method='post' id='quiz-submit-form'><input type='hidden' name='quiz_unique' value='"+s.quiz.quiz_unique+"'><input type='hidden' name='play_unique' value='"+s.play_unique+"'><input type='hidden' name='question_number' value='"+s.question.question_number+"'><input type='hidden' name='endtime' value='"+s.endtime+"'><input type='hidden' name='answer' value='false'><p id='countdown-timer'></p></form></div>",$("#start-quiz-btn").remove(),$("#start-quiz-form").remove(),$("#quiz-well").append(u),$("#"+s.question.question_unique).slideDown(),e=new Date(s.endtime).getTime();var o=0,a=setInterval(function(){var t=new Date(s.present_time).getTime()+1e3*o++,i=e-t,n=Math.floor(i%36e5/6e4),u=Math.floor(i%6e4/1e3);$("#countdown-timer").text(n+"m "+u+"s"),i<0&&(clearInterval(a),$("#countdown-timer").text("0m 0s"),$("#submit-quiz-btn").click())},1e3)}})}),$("#quiz-well").on("click","a",function(e){e.preventDefault()}),$("#quiz-well").on("submit","#quiz-submit-form",function(e){e.preventDefault()}),$("#quiz-well").on("click","#submit-quiz-btn",function(){n="negative",s="","single choice"==t?$(".list-option.selected").attr("id")==i&&(n="positive"):"multiple choice"==t?($(".list-option.selected").each(function(){s+=$(this).attr("id")+","}),(s=s.substr(0,s.length-1))==i&&(n="positive")):$("#text-answer").val().toLowerCase()==$("#text-answer-content").val().toLowerCase()&&(n="positive"),$("input[name=answer]").val(n),"positive"==n?($(this).parent().find(".alert-message").addClass("alert alert-success").text("Correct Answer"),"text"==t&&$("#text-answer").parent().addClass("has-success")):($(this).parent().find(".alert-message").addClass("alert alert-danger").text("Wrong Answer"),"text"!==t?($(this).parent().find(".list-option.selected").removeClass("list-group-item-success").addClass("list-group-item-danger"),$(this).parent().find(".list-option").each(function(){i.indexOf($(this).attr("id"))>=0&&$(this).removeClass("list-group-item-success list-group-item-info list-group-item-danger").addClass("list-group-item-success")})):$("#text-answer").val($("#text-answer-content").val()).parent().addClass("has-error")),$(this).removeClass("btn-danger").addClass("btn-primary").text("Submitted..!").removeAttr("id"),$.ajax({type:"POST",url:start_quiz_url,data:{quiz_unique:$("input[name=quiz_unique]").val(),play_unique:$("input[name=play_unique]").val(),question_number:$("input[name=question_number]").val(),endtime:$("input[name=endtime]").val(),answer:$("input[name=answer]").val()},dataType:"json",success:function(s){"completed"==s.quiz_status?setTimeout(function(){window.location.href=result_base_url+s.quiz_slug+"/play/"+s.play_unique},1500):(u="",t=s.question.question_type,i=s.question.answer,n="negative",u+="</div><div class='well'><div class='row' id='"+s.question.question_unique+"' style='display : none;'><h3><strong>Q "+s.question.question_number+"</strong> "+s.question.question+"</h3>","text"==t?u+="<div class='form-group'><input class='form-control' type='text' id='text-answer'><input type='hidden' value='"+s.options[0].option_content+"' id='text-answer-content'></div>":(u+="<h5 style='color : green;'>"+t.toUpperCase()+"</h5><ul  class='list-group'>",$.each(s.options,function(e,t){u+="<a href=''><li class='list-option list-group-item list-group-item-info' id='"+t.option_unique+"'>"+t.option_content+"</li></a><br>"}),u+="</ul>"),u+="<button class='btn btn-danger' id='submit-quiz-btn'>Submit</button><br><div class='alert-message'></div><form method='post' id='quiz-submit-form'><input type='hidden' name='quiz_unique' value='"+s.quiz.quiz_unique+"'><input type='hidden' name='play_unique' value='"+s.play_unique+"'><input type='hidden' name='question_number' value='"+s.question.question_number+"'><input type='hidden' name='endtime' value='"+s.endtime+"'><input type='hidden' name='answer' value='false'><p id='countdown-timer'></p></form></div>",$("#quiz-submit-form").remove(),$("#quiz-well").append(u),$("#"+s.question.question_unique).slideDown(),e=new Date(s.endtime).getTime())}})}),$("#quiz-well").on("click",".list-option",function(){"single choice"==t?($(".list-option").removeClass("list-group-item-success selected").addClass("list-group-item-info"),$(this).removeClass("list-group-item-info").addClass("list-group-item-success selected")):"multiple choice"==t&&($(this).hasClass("selected")?$(this).removeClass("list-group-item-success selected").addClass("list-group-item-info"):$(this).removeClass("list-group-item-info").addClass("list-group-item-success selected"))})});